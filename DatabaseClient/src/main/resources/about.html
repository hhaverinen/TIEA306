<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Instructions for DatabaseClient</title>
</head>
<style>
    ol > li {font-weight: bold;}
</style>
<body>
<h1>DatabaseClient</h1>
<ul>
    <li><a href="#1.0">About me and this program</a></li>
        <ul>
            <li><a href="#1.1">DatabaseClient</a></li>
        </ul>
    <li><a href="#2.0">Instructions for users</a></li>
        <ul>
            <li><a href="#2.1">Main window</a></li>
            <li><a href="#2.2">Alias window</a></li>
        </ul>
    <li><a href="#3.0">Known issues</a></li>
    <li><a href="#4.0">Instructions for developers and maintainers</a></li>
        <ul>
            <li><a href="#4.1">Maintaining</a></li>
            <li><a href="#4.2">Developing</a></li>
            <ul>
                <li><a href="#4.2.1">Architecture</a></li>
            </ul>
        </ul>

</ul>

<h2 id="1.0">About this program</h2>
<p>Here is some short and basic info about program</p>

<h3 id="1.1">DatabaseClient</h3>
<p>
    DatabaseClient is a simple JavaFX program, that with one can connect to MySQL databases, and make basic queries to it.
    With basic queries I'm talking about following:
    <ul>
        <li>SELECT</li>
        <li>INSERT</li>
        <li>UPDATE</li>
        <li>DELETE</li>
    </ul>
</p>
<p>
    This program also lets one to read and execute sql queries from files, as well as save ran queries from worksheet to file.
    Also query results to csv file is possible.
</p>
<p>
    Program offers a possibility to manage database aliases too. One can save connection information (url, user, password) via program.
    Those connections are then loaded on startup, so you can connect to often used databases more easily, and you don't need to remember
    all those connection information from memory. <strong>Word of caution though, passwords are currently saved as clear text, so keep this in mind
    when saving aliases!</strong>
</p>

<h2 id="2.0">Instructions for users</h2>
<p>Here you can find some instructions how to use this program.</p>

<h3 id="2.1">Main window</h3>
<img src="mainwindow.png" />
<ol>
    <li>Main menu</li>
    <p>Under File are found same commands as in the section number 3. Under aliases one can open window for managing aliases, and under about one can find this instruction.</p>
    <li>Controls for active connections</li>
    <p>Dropdown contains active connections. User can select which database is queries by selecting active connection from that dropdown. It is also possible to disconnect and reconnect those connections.</p>
    <li>Controls for queries</li>
    <p>Run query button runs query from same line where the caret is, or if there is selected text in query area, then program runs it. For running query there is also hotkey <strong>CTRL + ENTER</strong>.</p>
    <p>One can also open sql file, which loads queries from file to query area. It is possible to run queries straight from the file.
        Saving sql clauses to file saves all queries from query area to a file. User can also export results of current query to csv file.</p>
    <li>Controls for connecting to database</li>
    <p>From here one connects to database. Selecting an alias from dropdown fills fields with saved alias information. <strong>NB: program currently has 10 second connection timeout, so if program seems to freeze when connecting, it really doesn't. It waits 10 seconds and if connection couldn't be established, program writes notification to log.</strong></p>
    <li>History of made queries</li>
    <p>This dropdown keeps history of made queries. Selecting query from here appends it to end of the query area.</p>
    <li>Query are</li>
    <p>Here one writes her queries. Normally it runs query from line where the caret is, but if there is selected text, it tries to run it instead. <strong>NB: See <a href="#3.0">known issues</a>, as running a selection sql clause might have some problems</strong></p>
    <p>Query area also support one line comments, comment mark is --.</p>
    <li>Database metadata panel</li>
    <p>Upon connection / changing active connection table data from connected database is loaded here.</p>
    <li>Query results</li>
    <p>Here comes the results of queries. Results get tabbed as queries are made. It is possible to copy values from cells with <strong>CTRL + C</strong>.</p>
    <li>Log</li>
    <p>Program will write log here, indicating successful and erroneous operations.</p>
</ol>

<h3 id="2.2">Alias window</h3>
<img src="aliaswindow.png" />
<ol>
    <li>Alias selection</li>
    <p>From here user can select already saved aliases. Choosing alias from here fills fields with information of that alias.</p>
    <li>Name of the alias</li>
    <p>This is only used for displaying in different dropdown boxes.</p>
    <li>Driver for database (currently supports only MySQL databases)</li>
    <p>Currently serves no purpose, as only MySQL databases are supported. However it is mandatory to select alias.
        <strong>NB: One shouldn't remove drivers.json file under conf directory, because program still uses it.
            Removing file can result to a situation, where one cannot add new aliases because driver is required, but program can't find a single driver.</strong></p>
    <li>Url of the database</li>
    <p>This is the url of the database where one want's to connect. Urls are like this: <stong>jdbc:mysql://localhost/example_db</stong>, where the localhost is the host machine (e.h. IP), and example_db is name of the database.</p>
    <li>User of the database</li>
    <p>User that one want's to connect to database.</p>
    <li>Password for the user</li>
    <p>Password for the user.</p>
    <li>Controls for managing aliases</li>
    <p>Here one can add new alias, modify selected alias, or delete selected alias. Popup confirmation is shown when trying to modify or delete alias.</p>
</ol>

<h2 id="3.0">Known issues</h2>
<ul>
    <li>Multiline/selection support</li>
    <p>There might be problems when running selection queries that span multiple lines. It seems that you need to have at least two words in the first line (e.g SELECT *). Not sure about this though.</p>
    <li>Driver file (drivers.json)</li>
    <p>Originally I planned to support more than just one database. However I ran to some difficulties, and I haven't yet implement more than MySQL support. Driver selection in alias window is basically pointless,
    but you still shouldn't remove drivers.json, because program "reads" info about drivers from that file. If program can't read drivers, you also can't choose driver and alias window won't let you save that alias.
    I don't fix that driver check, because this way I might implement support for more than just one database someday. ;)</p>
    <li>Resizing problems</li>
    <p>When resizing window to very very small, components might scale somewhat oddly. Maybe, I'm not sure what's odd!</p>
    <li>Alias dropdown rendering after modifying alias in alias window</li>
    <p>When renaming alias (modify), the name won't render to dropdown properly.
        When re-selecting modified alias (select another and then the modified again), name will show properly in cell, but still not in the dropdown.
        Closing and opening alias window fixes this problem.</p>
</ul>

<h2 id="4.0">Instructions for developers and maintainers</h2>
<p>Here you can find some information and instructions for maintaining and developing this program.</p>

<h3 id="4.1">Maintaining</h3>
<p>
    Program doesn't really need any maintaining, and there really isn't any tasks one could do (in maintaining purpose). Only thing is to assure that json files under /conf won't get erased.
    Program works basically normally without those files, but as mentioned in <a href="#3.0">chapter 3.0</a>, one shouldn't remove drivers.json as it might cause problems when saving aliases.

<h3 id="4.2">Developing</h3>
<p>
    You can develop this anyway you like to any direction you like. I have provided TODO.txt file that contains some tasks that could be done. File can be found at the same GitHub repository as this program.
    I have done my best to follow good coding practices, commenting, project structuring etc, so that further development would be as easy and straight forward as possible.
</p>

<h4 id="4.2.1">Architecture</h4>
<p>Under I have provided some sort of picture describing architecture of this program, for helping to get quick view of how things work together.</p>
<img src="architecture.png" />
<p>Both controller (Main and Alias) work with corresponding windows. They handle inputs and outputs of the GUI. They also get get data from Context and bind them to corresponding dropdown boxes.</p>
<p>Context is singleton that holds data about saved and active connections, as well as saved drivers. Context is used by controllers to get and put data from/to it. It keeps all the data in SimpleObjectProperties that contains list of elements.</p>
<p>DatabaseConnection, DriverPOJO and ConnectionPOJO are mainly used for displaying purposes (in dropdown boxes mostly). DriverPOJOs and ConnectionPOJOs are also saved to files though (drivers.json and aliases.json respectively).
    Context singleton holds all these objects.</p>
<p>DatabaseHelper handles connections, queries and results to/from database. It offers simple functions for other classes (MainController basically) to use for doing database related tasks.</p>
<p>FileHelper is class for writing and reading data to/from files. It has methods for reading/writing json files and transforming them to POJO representations, as well as reading/writing plain text.</p>

</body>
</html>